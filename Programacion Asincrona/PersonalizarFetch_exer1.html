<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulario</title>
    <style>

    </style>
</head>

<body>
    <h1>Exercicio Formulario Fetch</h1>

    <form action="" method="post">
        <label for="numero"> Numero: </label>
        <input type="number" name="numero" id="numero" min="1" max="10">
        <button id="enviar">Submit</button>
    </form>

    <table>

    </table>


</body>

<script>
    const button = document.getElementById("enviar")
    const numero = document.getElementById("numero")

    // Crear taboa
    const tbody = document.createElement("tbody");
    const tabla = document.createElement("table");
    tabla.border = "2";
    tabla.id = "tabla";
    tabla.innerHTML = `
        <thead>
            <tr>
                <td>ID</td>
                <td>Title</td>
                <td>Body</td>
            </tr>
        </thead>
    `;
    tabla.appendChild(tbody);
    document.body.appendChild(tabla);


    //Prevent default e cargar post
    button.addEventListener("click", (e) => {
        e.preventDefault()
        cargarPost(numero.value)
    })

    function cargarPost(userId) {
        fetch(`https://jsonplaceholder.typicode.com/posts?userId=${userId}`)
            .then(response => response.json())
            .then(data => {
                console.log(data);
                pintarTabla(data)
            })
    }

    function pintarTabla(posts) {
        tbody.innerHTML = ""

        posts.forEach(post => {
            const row = document.createElement("tr")
            row.innerHTML = `
                <td>${post.id}</td>
                <td>${post.title}</td>
                <td>${post.body}</td>
            `
            tbody.appendChild(row)
        })
    }

</script>


</html>